<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokeverse</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- Background Elements -->
  <div class="particles" id="particles"></div>
  
  <!-- Navigation -->
    <nav class="custom-navbar">
      <div class="navbar-container">
        <div class="logo-container">
          <img src="/static/images/pokeball.webp" class="pokeball" alt="Pokeball Logo" />
        </div>
        <span class="heading">PokeVerse</span>
        <div class="nav-links">
          <a href="{{url_for('home')}}" class="nav-link">Home</a>
          <a href="{{ url_for('pokedex') }}" class="nav-link">Pokédex</a>
          <a href="{{ url_for('games') }}" class="nav-link">Games</a>
        </div>
      </div>
    </nav>

  <!-- Main Content -->
  <main>
    <header id="hero">
      <h1>Welcome to Pokeverse!</h1>
      <p>Discover the world of Pokémon</p>
      <div class="actions">
        <a href="{{ url_for('pokedex') }}" class="primary">Explore Pokedex</a>
        <a href="{{ url_for('games') }}">Play Games</a>
      </div>
    </header>
    <div id="pokemonOfDay" class="pokemon-of-day-card"></div>
  </main>



<script>
// Particle System
function createParticles() {
  const particlesContainer = document.getElementById('particles');
  const particleCount = 20;
  
  for (let i = 0; i < particleCount; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 8 + 's';
    particle.style.animationDuration = (8 + Math.random() * 4) + 's';
    particlesContainer.appendChild(particle);
  }
}

// Pokémon of the Day
const allPokemonNames = {{ pokemon_list | tojson | safe }};
function getPokemonOfDay() {
  if (!allPokemonNames || allPokemonNames.length === 0) {
    return 'pikachu';
  }
  const idx = new Date().getDate() % allPokemonNames.length;
  return allPokemonNames[idx];
}

async function renderPokemonOfDay() {
  const name = getPokemonOfDay();
  const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${name}`);
  const data = await res.json();
  const card = document.getElementById('pokemonOfDay');
  const type = data.types[0].type.name;
  card.className = `pokemon-of-day-card type-${type}`;
  card.innerHTML = `
    <h2 style='font-size:1.5rem;margin-bottom:0.5rem;font-family: "Press Start 2P", cursive;'>Pokémon of the Day</h2>
    <img src="${data.sprites.other['official-artwork'].front_default}" alt="${name}" style="width:120px;transition:transform 0.3s,box-shadow 0.3s;cursor:pointer;">
    <div style='font-size:1.2rem;margin:0.5rem 0 0.3rem 0;font-family: "Press Start 2P", cursive;'><b>${name.charAt(0).toUpperCase() + name.slice(1)}</b></div>
    <div style='margin-bottom:0.3rem;font-size:0.9rem;font-family: "Press Start 2P", cursive;'>Type: <span style='text-transform:capitalize;'>${data.types.map(t => t.type.name).join(', ')}</span></div>
    <div style='margin-bottom:0.3rem;font-size:0.9rem;font-family: "Press Start 2P", cursive;'>ID: #${data.id}</div>
    <a href="/pokedex?pokemon=${name}" class="view-pokedex-link">View in Pokédex</a>
  `;
  
  // Add hover effect to image
  const img = card.querySelector('img');
  img.addEventListener('mouseover', () => {
    img.style.transform = 'scale(1.08) rotate(-3deg)';
    img.style.boxShadow = '0 8px 32px rgba(255,255,255,0.18)';
  });
  img.addEventListener('mouseout', () => {
    img.style.transform = '';
    img.style.boxShadow = '';
  });
}

// Initialize
renderPokemonOfDay();
window.addEventListener('load', createParticles);
</script>

</body>
</html>